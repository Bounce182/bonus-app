<h1>Listing user bonuses</h1>

<% if @calendar_lines.count == 0 %>
    No data found. Please import it at first: <%= link_to 'Import data', calendar_lines_path(:update => true), :id => 'import-data' %>
<% else %>

<%# form_tag (calendar_lines_path) do %>
    <%# label_tag :filter_user_id %><br>
    <%# number_field_tag(:user_id) %>
    <%# submit_tag 'Search' %>
<%# end %>

User id:
<%= form_for(:filters, :url => calendar_lines_path, :html => {:method => :get} ) do |f| %>
    <div>
        <%= number_field('', ':user_id' ) %>
        <%= f.submit 'Filter' %>
    </div>
<% end %>

<table class="listing">
  <thead>
    <tr>
      <th>Bonus id</th>
      <th>User id</th>
      <th>Date</th>
      <th>Amount</th>
      <th colspan="3">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @calendar_lines.each do |calendar_line| %>
      <tr>
        <td><%= calendar_line.id %></td>
        <td><%= calendar_line.user_id %></td>
        <td><%= calendar_line.date %></td>
        <td><%= calendar_line.fragments[0].amount %></td>
        <td><%= link_to 'Show', calendar_line %></td>
        <td><%= link_to 'Edit', edit_calendar_line_path(calendar_line) %></td>
        <td><%= link_to 'Destroy', calendar_line, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
  <tfoot>
  <tr>
    <td class="center" colspan="9">
      <%= will_paginate @dvds %>
    </td>
  </tr>
  </tfoot>
</table>

<% end %>

<%= params %>